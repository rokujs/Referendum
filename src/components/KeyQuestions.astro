---
const questions = [
  {
    question: "Pregunta 1 – Trabajo informal",
    description:
      "¿Está usted de acuerdo con que se reforme la Constitución para garantizar derechos laborales y de seguridad social a quienes trabajan en condiciones de informalidad, tal como se establece en el texto normativo adjunto?",
  },
  {
    question: "Pregunta 2 – Automatización y renta básica transitoria",
    description:
      "¿Está usted de acuerdo con establecer en la Constitución una transición justa frente a la automatización del trabajo y crear una renta básica transitoria para quienes pierdan su empleo por causas tecnológicas?",
  },
  {
    question: "Pregunta 3 – Protección al campesinado y mujeres rurales",
    description:
      "¿Está usted de acuerdo con que se reforme la Constitución para reconocer y proteger al campesinado como sujeto de especial protección y garantizar derechos a las mujeres campesinas que trabajan sin remuneración directa?",
  },
  {
    question: "Pregunta 4 – Voluntariado y aprendices en formación",
    description:
      "¿Está usted de acuerdo con reconocer y garantizar derechos mínimos a quienes prestan servicios voluntarios en ONG y a los aprendices técnicos y tecnológicos, incluyendo protección en salud, dignidad y condiciones de formación adecuadas?",
  },
]
---

<section
  class='w-full bg-pink-300 flex flex-col items-center justify-center py-10 lg:py-30 px-4 lg:px-12'
>
  <div
    style='box-shadow: 10px 10px 0px 3px var(--color-fuchsia-500);'
    class='flex flex-col items-center justify-center max-w-[90vw] lg:max-w-[50vw] bg-violet-700 px-8 py-6 lg:py-14 lg:px-16 rounded-lg'
  >
    <div>
      <h2 class='text-4xl txt-center text-fuchsia-500 mb-12 font-bold'>
        Preguntas Clave del Referendo
      </h2>
      <p class='text-lg text-slate-200'>
        El referendo someterá a votación popular cuatro preguntas fundamentales
        que buscan reformar la Constitución para proteger los derechos laborales
        y sociales en Colombia. Estas preguntas abordan la informalidad, la
        automatización, la protección al campesinado y los derechos de
        voluntarios y aprendices.
      </p>
    </div>
    <div class='mt-10 flex flex-col'>
      {
        questions.map((question, i) => (
      <div>
        <button
          onclick={`toggleAccordion(${i})`}
          class='w-full flex items-center py-5 text-slate-200 font-semibold'
        >
          <span
            id={'icon-' + i}
            class='text-slate-200 transition-transform duration-300 mr-3'
          >
            <svg
              xmlns='http://www.w3.org/2000/svg'
              viewBox='0 0 16 16'
              fill='currentColor'
              class='w-4 h-4'
            >
              <path
                fill-rule='evenodd'
                d='M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z'
                clip-rule='evenodd'></path>
            </svg>
          </span>
          <span class="text-xl text-left">{question.question}</span>
        </button>
        <div
          id={'content-' + i}
          class='max-h-0 overflow-hidden transition-all duration-300 ease-in-out'
        >
          <div class='pb-5 ml-10 text-lg text-slate-200'>
            <p>{question.description}</p>
          </div>
        </div>
      </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  function toggleAccordion(index: number) {
    const content = document.getElementById(
      `content-${index}`
    ) as HTMLElement | null
    const icon = document.getElementById(`icon-${index}`) as HTMLElement | null

    if (!content || !icon) return

    // SVG for Down icon
    const downSVG = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
        <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
      </svg>
    `

    // SVG for Up icon
    const upSVG = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
        <path fill-rule="evenodd" d="M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z" clip-rule="evenodd" />
      </svg>
    `

    // Toggle the content's max-height for smooth opening and closing
    if (content.style.maxHeight && content.style.maxHeight !== "0px") {
      content.style.maxHeight = "0"
      icon.innerHTML = upSVG
    } else {
      content.style.maxHeight = content.scrollHeight + "px"
      icon.innerHTML = downSVG
    }
  }

  // @ts-ignore
  window.toggleAccordion = toggleAccordion
</script>
